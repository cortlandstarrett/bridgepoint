<?xml version="1.0" encoding="UTF-8"?>
<!--

 File:      $RCSfile: generate.xml,v $
 Version:   $Revision: 1.32 $
 Modified:  $Date: 2013/01/10 22:49:48 $

 (c) Copyright 2004-2013 by Mentor Graphics Corp.  All rights reserved.

-->
<project name="bp.compare" default="all" basedir=".">
  <target name="all"
          description="Generate Compare tree"
          depends="java">
  </target>

  <target name="nb_all"
        description="Nightly build target"
        depends="java">
  </target>

  <property environment="env"/>
  <property name="bp_bin_dir" value="${env.PT_HOME_DRIVE}${env.PT_HOME}\bin" />
  <property name="mcj_path" value="../MC-Java" />

  <property name="eclipse-home" value="${basedir}/../.."/>

  <property environment="env"/>

  <property name="sql.input" value="../com.mentor.nucleus.bp.core/models/ooaofooa_hierarchy.bak" />
  <property name="sql.output" value="ooaofooa_hierarchy.sql" />

  <target name="java.depends" >
    <uptodate property="java.buildNotNeeded" targetfile="src/com/mentor/nucleus/bp/compare/ComparePluginMessages.properties">
       <srcfiles dir = "../com.mentor.nucleus.bp.core/sql/" includes = "ooaofooa_hierarchy_schema.sql,ooaofooa_hierarchy.pei.sql" />
       <srcfiles dir = "../com.mentor.nucleus.bp.core/sql" includes = "ooaofooa.sql" />
       <srcfiles dir = "arc"        includes = "BuildCompTree.arc, create_properties_file.inc, create_util_class.inc" />
       <srcfiles dir = "${mcj_path}" includes = "ooa_schema.sql,arch_names.inc"/>
    </uptodate>
  </target>

  <target name="java"
          depends="java.depends"
          description="Generate the tree Properties file and util class"
          unless="java.buildNotNeeded" >
    <echo >Generating Compare Properties File ...</echo>
    <delete file="CompareTree.gen" />
    <exec vmlauncher="false" failonerror="true" executable="${bp_bin_dir}\xtumlmc_gen_erate" >
        <env key="PTC_MC_ARC_DIR" value="${mcj_path}"/>
    <arg line="-nopersist
      -import ${mcj_path}/ooa_schema.sql
      -import ../com.mentor.nucleus.bp.core/sql/ooaofooa_hierarchy_schema.sql
      -import ../com.mentor.nucleus.bp.core/sql/ooaofooa.sql
      -import ../com.mentor.nucleus.bp.core/sql/ooaofooa_hierarchy.pei.sql
      -arch arc/BuildComparisonTree.arc"/>
  </exec>
    <delete file="ooaofooa_hierarchy.gen" />
    <delete file="____file.txt" />
    <delete file="key_lett.txt" />
    <delete file="rel_chain.txt" />
    <delete file="rel_num.txt" />
    <delete file="remainder.txt" />

    <touch file="src/com/mentor/nucleus/bp/compare/ComparePluginMessages.properties" />
  </target>

  <!-- COMPILE TARGETS -->

  <!-- This target is not used in the eclipse environment.  The eclipse Java
       builder handles the java compilation when building BridgePoint under
       eclipse.  This target is used only when building BridgePoint from the
       command line on the build server. -->
  <target name="compile"
        description="Compile project" >

    <echo>Compiling ${ant.project.name}</echo>

    <mkdir dir="../com.mentor.nucleus.bp.compare/bin" />

    <javac memoryinitialsize="512m" memorymaximumsize="512m" source="1.6"
        fork="yes" destdir="../com.mentor.nucleus.bp.compare/bin"
        debug="true" debuglevel="lines,vars,source" encoding="UTF-8">
       <src path="../com.mentor.nucleus.bp.compare/src/com/mentor/nucleus/bp/compare" />
       <classpath>
         <pathelement path="../com.mentor.nucleus.bp.core/bin" />
         <pathelement path="../com.mentor.nucleus.bp.io.mdl/bin" />
         <pathelement path="../com.mentor.nucleus.bp.io.core/bin" />
         <fileset dir="${eclipse-home}/plugins" casesensitive="yes">
           <include name="**/org.eclipse.osgi_*.jar" />
           <include name="**/org.eclipse.jface_*.jar" />
           <include name="**/org.eclipse.jface.text_*.jar" />
           <include name="**/org.eclipse.ui.views_*.jar" />
           <include name="**/org.eclipse.core.resources_*.jar" />
           <include name="**/org.eclipse.ui_*.jar" />
           <include name="**/org.eclipse.text_*.jar" />
           <include name="**/org.eclipse.ui.workbench_*.jar" />
           <include name="**/org.eclipse.ui.win32_*.jar" />
           <include name="**/org.eclipse.swt.win32.win32.x86_*.jar" />
           <include name="**/org.eclipse.ui.workbench.texteditor_*.jar" />
           <include name="**/org.eclipse.ui.editors_*.jar" />
           <include name="**/org.eclipse.compare_*.jar" />
           <include name="**/org.eclipse.core.boot_*.jar" />
           <include name="**/org.eclipse.core.runtime_*.jar" />
           <include name="**/org.eclipse.equinox.common_*.jar"/>
           <include name="**/org.eclipse.equinox.registry_*.jar"/>
           <include name="**/org.eclipse.core.commands_*.jar"/>
          </fileset>
       </classpath>
    </javac>

  </target>

  <!-- CLEAN TARGETS -->

  <target name="clean_all"
        description="Clean entire project"
        depends="clean_classes, clean_properties_util" >

    <echo>Done cleaning for ${ant.project.name}</echo>

  </target>

  <target name="clean_properties_util"
        description="Remove the properties file" >

    <echo>Removing generated sql file: ${sql.output} ...</echo>
    <delete file="src/com/mentor/nucleus/bp/compare/ComparePluginMessages.properties" />
    <delete file="src/com/mentor/nucleus/bp/compare/util/Util.java"/>

  </target>

  <target name="clean_classes"
          description="Remove all compiled class files." >

  <echo>Removing all compiled class files ...</echo>
  <delete verbose="true" dir="bin" />

  </target>
</project>
<!--
$Log: generate.xml,v $
Revision 1.32  2013/01/10 22:49:48  rmulvey
job:dts0100939343
Updated the copyright to 2013

Revision 1.31  2012/01/23 21:31:03  kbrown
job:dts0100848212
Batch commit of copyright updated files.

Revision 1.30  2011/05/30 20:28:42  kbrown
job:dts0100742889
Updated copy right.

Revision 1.29  2011/01/20 16:10:14  kbrown
job:dts0100745185
Bump the java compiler compliance level from 1.5 to 1.6 for the build server.  Changeset will be committed to this DEI separately. This change is going directly to HEAD.

Revision 1.28  2010/09/01 19:46:35  kbrown
job:dts0100714964
Updating HEAD with the changes for generate.xml compile target to pass the encoding to use (UTF-8) to javac.

Also flips the switch on generic packages to no.

Revision 1.27.4.1  2010/09/01 14:43:56  hkhaled
job:dts0100714964

adding encoding="UTF-8" to javac in generate.xml files

Revision 1.27  2010/01/05 03:52:37  kbrown
job:dts0100644853
Batch commit of copyright change from 2009 to 2010 for BP CVS projects.

Revision 1.26  2009/10/23 17:07:34  kbrown
job:dts0100580393
Batch commit of generate.xml files to fix an issue with wildcards in the compile target.

Revision 1.25  2009/10/23 05:47:44  rmulvey
job:dts0100580393
Promoted from R3_0_3-SKB-dts0100580393

Revision 1.24.4.1  2009/10/15 12:48:04  kbrown
job:dts0100580393
Batch commit of all generate.xml files.  Modified to use a wildcard instead of specifying exact versions of plugins to import on the java classpath when compiling on the build server.

Revision 1.24  2009/01/01 23:18:44  rmulvey
Job:4060
Batch promotion of copyright changes from Review-i4060 and Review-i4060-01.

Revision 1.23.2.1  2008/12/31 16:15:05  rmulvey
Job:4060
This is a batch commit of 2009 copyright changes to branch Review-i4060.  This includes the
report that outlines all changes made (before/after for each line changed).  This report is found here: <cvs>/Documentation/internal/test_results/R2_1_2/i4060/update-copyright-results.txt.

Revision 1.23  2008/09/05 15:28:28  rmulvey
Job:1845 3672 3657
Promoted from branch R2_0_4-SKB-RWM-t-i1845-i3672-i3657

Revision 1.22.10.1  2008/08/22 18:25:29  rmulvey
Job:1845 3672 3657
Introduced working branch R2_0_4-SKB-RWM-i1845-i3672-i3657.  This is based on the current work in branch R2_0_4-SKB-i1845-01 (which is complete but blocked by bug 3672 and bug 3657).

Revision 1.22.8.2  2008/08/21 13:32:45  kbrown
Job:1845
More classpath additions for the build server.

Revision 1.22.8.1  2008/08/19 20:08:07  kbrown
Job:1845
Updated generate.xml build server plugin names to 3.3 names for compare.

Revision 1.22  2008/01/08 20:15:49  rmulvey
Job:3349
Promoted from Review-i3349.  The copyright has been updated to 2008 and the version has been bumped to 1.5.4.

Revision 1.21.6.1  2007/12/21 18:01:18  rmulvey
Job:3339
Checking-in the copyriight changes in branch Review-i3349.  A detailed list of these changes is found
in the report produced by the utility used to changesthese messages.  This report is here:
Documentation/internal/test_results/R1_5_4/i3349/update-copyright-results.txt

Revision 1.21  2007/10/12 16:24:31  kbrown
Job:3195
Updated the compile target that is used (only) by the build server to build the java files.  Added flags to this target to include debugging info such as line numbers, variable names, and source file names.  Also added comment blocks to the compile target explaining it is only used by the build server.  This update also includes a change to the obfuscate template to move from a deprecated target to a new one.  Here are the changes:

com.mentor.nucleus.bp.als/generate.xml

com.mentor.nucleus.bp.compare/generate.xml

com.mentor.nucleus.bp.core/tools/obfuscate_template.xml
com.mentor.nucleus.bp.core/generate.xml

com.mentor.nucleus.bp.core.test/generate.xml

com.mentor.nucleus.bp.debug.ui/generate.xml

com.mentor.nucleus.bp.io.core/generate.xml

com.mentor.nucleus.bp.io.mdl/generate.xml

com.mentor.nucleus.bp.io.sql/generate.xml

com.mentor.nucleus.bp.mc.mc2020/generate.xml

com.mentor.nucleus.bp.mc.mc3020/generate.xml

com.mentor.nucleus.bp.mc.xmiexport/generate.xml

com.mentor.nucleus.bp.ui.canvas/generate.xml

com.mentor.nucleus.bp.ui.canvas.test/generate.xml

com.mentor.nucleus.bp.ui.explorer/generate.xml

com.mentor.nucleus.bp.ui.properties/generate.xml

com.mentor.nucleus.bp.ui.properties.test/generate.xml

com.mentor.nucleus.bp.ui.session/generate.xml

com.mentor.nucleus.bp.ui.text/generate.xml

com.mentor.nucleus.bp.ui.tree/templates/generate.xml

com.mentor.nucleus.bp.welcome/generate.xml

In order to test these files on the build server, the changed files are being checked directly into HEAD.

Revision 1.20  2007/09/05 01:40:33  kbrown
Job:2673
Promoting copyright changes for plugins:
edge_uml_suite
als
als.oal
als.oal.test
bld.pkg
bld.pkg-feature
compare
compare.test

Revision 1.19.28.1  2007/09/01 01:49:27  rmulvey
Job:2673
Updated copyright messages and version numbers in Review-i2673-01.

Revision 1.19  2006/10/17 18:38:04  rmulvey
Job:2539
Modified all the generate.xml files and added "memoryinitialsize="512m" memorymaximumsize="512m"" to the javac tasks.

Revision 1.18  2006/06/02 20:15:40  greg
Job: 1554
- Added "source=1.5" to compile target javac invocation

Revision 1.17.128.1  2006/06/02 15:35:21  greg
Ready for promotion

Revision 1.17.120.1  2006/05/26 20:40:31  greg
Save changes before creating new workspace

Revision 1.17  2005/11/11 18:53:51  tlondon
Job: 1196
Changed to employ new generator and its inherent performance enhancements.

Revision 1.16.14.1  2005/11/07 19:53:47  jmather
Job: 1196
Changed to employ new generator and its inherent performance enhancements.

Revision 1.16  2005/09/20 23:10:25  jmather
Job:1099
Updated classpath entries

Revision 1.15.80.1  2005/09/13 18:28:40  tlondon
Job:1099

Updated classpath entries

Revision 1.15  2005/04/05 04:40:00  greg
Job: 293
Changed refs to old .mdl ext and model location

Revision 1.14.26.1  2005/03/30 23:26:29  tlondon
Job: 293

Changed refs to old .mdl ext and model location

Revision 1.14  2005/03/25 01:22:41  campbell
Job: 627
Added help to classpath.

Revision 1.13.118.1  2005/03/24 16:55:43  tlondon
Job: 627

Added extension to org.eclipse.help.contexts, and support for new
contexts in a release

Revision 1.13  2005/01/07 14:47:12  campbell
Job: 618
Removed element for compatibility plug-in from compile target.

Revision 1.12.14.1  2005/01/04 23:16:24  jmather
Job: 618
Removed element for compatibility plug-in from compile target.

Revision 1.12.8.1  2005/01/04 21:09:28  jmather
Job: 618
Removed element for compatibility plug-in from compile target.

Revision 1.12  2004/12/21 22:30:44  greg
Job: 434
Add more classpaths to compile target

Revision 1.11  2004/12/21 17:04:47  greg
Job: 434
Updated compile target to references Eclipse 3.0 plugins.

Revision 1.10  2004/12/16 01:06:25  greg
Job: 599

Removed all build timeouts

Revision 1.9.74.1  2004/12/15 22:21:11  tlondon
Job: 599

Removed all build timeouts

Revision 1.9.62.1  2004/12/09 17:06:25  tlondon
Job: 599

Removed all timeout entries from build scripts

Revision 1.9  2004/10/15 17:48:26  tlondon
Job: 457

Updated to include io.core in classpath of compare's compile target

Revision 1.8  2004/10/14 17:24:37  tlondon
Job: 457

Adding io.mdl to classpath

Revision 1.7  2004/09/30 18:38:36  tlondon
Job: 431

Added compile target to bp.compare

Revision 1.6  2004/09/23 23:27:49  build
Job: 422
./set_exec_call_timeouts.sh: Setting exec timeout values for com.mentor.nucleus.bp.compare.

Revision 1.5  2004/09/23 22:16:47  tlondon
Job: 422

Adding a nb_all target

Revision 1.4  2004/09/17 19:37:06  greg
Job: 31
Remove sql and schema targets

Revision 1.3  2004/09/09 16:29:54  babar
Job:175
Introduced under i175: compare and support of multi
model root generally known as Ooaofooa

Revision 1.1.2.8  2004/09/03 12:46:47  siddique
Job:175
Removed the format_java target

Revision 1.1.2.7  2004/08/26 15:19:29  babar
Job:175
Issues in the review handled. The compare functionality works well.

Revision 1.2  2004/08/10 12:05:00  babar
Job:175
Introduced under i175

Revision 1.1.2.5  2004/07/30 07:15:31  siddique
Job:175
Cleanup performed, updated archetypes, removed extra files and folders
as the inspectors were moved to core, updated create_util_class.java

Revision 1.1.2.4  2004/07/28 09:55:00  siddique
Job:175
Corrected few problems

Revision 1.1.2.3  2004/07/16 10:36:16  siddique
Job:175
Minor naming updations

Revision 1.1.2.2  2004/07/12 06:46:55  siddique
Job:175
Text Generation support added, without creation of comparison trees.

Revision 1.1.2.1  2004/07/06 12:59:16  siddique
Job:175
Introducing archetypes

-->