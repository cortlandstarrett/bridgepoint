<?xml version="1.0" encoding="UTF-8"?>
<!--

 File:      $RCSfile: generate.xml,v $
 Version:   $Revision: 1.36 $
 Modified:  $Date: 2013/05/10 05:34:41 $

 (c) Copyright 2004-2013 by Mentor Graphics Corp.  All rights reserved.

-->
<project name="bp.ui.properties" default="all" basedir=".">
  <target name="all"
          description="Generate UI Properties classes"
          depends="java,format_java">
  </target>

  <target name="nb_all"  description="Nightly build target" depends="java" />

  <property environment="env"/>
  <property name="bp_bin_dir" value="${env.PT_HOME_DRIVE}${env.PT_HOME}\bin" />
  <property name="mcj_path" value="../MC-Java" />

  <property name="eclipse-home" value="${basedir}/../.."/>
  <property name="plugins-home" value="${ant.home}/../.."/>

  <property environment="env"/>

  <property name="core_sql_dir" value="../com.mentor.nucleus.bp.core/sql" />

  <target name="java.depends" >
    <uptodate property="java.buildNotNeeded" targetfile="src/com/mentor/nucleus/bp/ui/properties/ClassO_OBJPropertySource.java">
       <srcfiles dir = "${core_sql_dir}" includes = "ooaofooa.sql,ooaofooa_hierarchy_schema.sql,ooaofooa_hierarchy.pei.sql" />
       <srcfiles dir = "arc"        includes = "BuildPropertySource.arc" />
       <srcfiles dir = "${mcj_path}" includes = "ooa_schema.sql,arch_names.inc"/>
    </uptodate>
  </target>

  <property name="chain_util_path" value="../com.mentor.nucleus.bp.core"/>
  <property name="core_color_path" value="../com.mentor.nucleus.bp.core/color"/>

  <target name="java"
          depends="java.depends"
          description="Generate the tree Properties file and util class"
          unless="java.buildNotNeeded" >
    <echo >Generating PropertySource files ...</echo>
    <exec vmlauncher="false" failonerror="true" executable="${bp_bin_dir}\xtumlmc_gen_erate" >
        <env key="PTC_MC_ARC_DIR" value="${mcj_path}"/>
        <env key="CHAIN_UTIL_DIR" value="${chain_util_path}"/>
       <env key="CORE_COLOR_DIR" value="${core_color_path}"/>
    <arg line="-nopersist
      -import ${mcj_path}/ooa_schema.sql
      -import ${core_sql_dir}/ooaofooa_hierarchy_schema.sql
      -import ${core_sql_dir}/ooaofooa.sql
      -import ${core_sql_dir}/ooaofooa_hierarchy.pei.sql
      -arch arc/BuildPropertySource.arc" />
  </exec>
    <delete file="____file.txt" />
    <delete file="key_lett.txt" />
    <delete file="rel_chain.txt" />
    <delete file="rel_num.txt" />
    <delete file="remainder.txt" />
  </target>

  <property name="cvs_java_files" value="ActivityPropertyDescriptor.java,BooleanPropertyDescriptor.java,
              DescriptionPropertyDescriptor.java,EnumPropertyDescriptor.java,IntegerPropertyDescriptor.java,
  	          ChooserPropertyDescriptor.java,ConstantValuePropertyDescriptor.java,DomainNameValidator.java,
  	          SystemModelNameValidator.java,BridgepointPropertySheetPage.java, BridgepointPropertySheetSorter.java,
              ModelElementNameValidator.java,DimensionsPropertyDescriptor.java,
              DimensionsValidator.java" />

  <target name="format_java"
        description="Format the generated java source" >
    <taskdef name="PTCodeFormat" classname="PTCodeFormatterTask" >
        <classpath>
            <pathelement path="../com.mentor.nucleus.bp.core/tools/" />
            <fileset dir="${plugins-home}/plugins" casesensitive="yes">
                <include name="**/org.eclipse.text_*.jar" />
                <include name="**/org.eclipse.ui_*.jar" />
                <include name="**/org.eclipse.jdt.core_*.jar" />
                <include name="**/org.eclipse.core.runtime_*.jar" />
                <include name="**/org.eclipse.osgi_*.jar" />
                <include name="**/org.eclipse.core.resources_*.jar" />
                <include name="**/org.eclipse.equinox.common_*.jar" />
            </fileset>
        </classpath>
    </taskdef>
          <PTCodeFormat>
          <fileset dir="src/com/mentor/nucleus/bp/ui/properties" includes="*PropertySource.java" />
        </PTCodeFormat>
  </target>

  <!-- COMPILE TARGETS -->

  <!-- This target is not used in the eclipse environment.  The eclipse Java
       builder handles the java compilation when building BridgePoint under
       eclipse.  This target is used only when building BridgePoint from the
       command line on the build server. -->
  <target name="compile"
                  description="Compile project" >

    <echo>Compiling ${ant.project.name}</echo>

    <mkdir dir="../com.mentor.nucleus.bp.ui.properties/bin" />

    <javac memoryinitialsize="512m" memorymaximumsize="512m" source="1.6"
        fork="yes" destdir="../com.mentor.nucleus.bp.ui.properties/bin"
        debug="true" debuglevel="lines,vars,source" encoding="UTF-8">
       <src path="../com.mentor.nucleus.bp.ui.properties/src/com/mentor/nucleus/bp/ui/properties" />
       <classpath>
         <pathelement path="../com.mentor.nucleus.bp.core/bin" />
         <pathelement path="../com.mentor.nucleus.bp.ui.text/bin" />
         <fileset dir="${eclipse-home}/plugins" casesensitive="yes">
           <include name="**/org.eclipse.osgi_*.jar" />
           <include name="**/org.eclipse.text_*.jar" />
           <include name="**/org.eclipse.ui.workbench.texteditor_*.jar" />
           <include name="**/org.eclipse.ui.editors_*.jar" />
           <include name="**/org.eclipse.ui.views_*.jar" />
           <include name="**/org.eclipse.ui_*.jar" />
           <include name="**/org.eclipse.jface_*.jar" />
           <include name="**/org.eclipse.core.runtime_*.jar" />
           <include name="**/org.eclipse.core.resources_*.jar" />
           <include name="**/org.eclipse.ui.workbench_*.jar" />
           <include name="**/org.eclipse.ui.win32_*.jar" />
           <include name="**/org.eclipse.swt.win32.win32.x86_*.jar" />
           <include name="**/org.eclipse.ui.ide_*.jar" />
           <include name="**/org.eclipse.equinox.common_*.jar"/>
           <include name="**/org.eclipse.equinox.registry_*.jar"/>
           <include name="**/org.eclipse.core.commands_*.jar"/>
         </fileset>
       </classpath>
    </javac>

  </target>


  <!-- CLEAN TARGETS -->

  <target name="clean_all"
        description="Clean entire project"
        depends="clean_classes, clean_source" >

    <echo>Done cleaning for ${ant.project.name}</echo>

  </target>

  <target name="clean_source"
        description="Remove the java source files" >

    <echo>Removing generated java files...</echo>
    <delete verbose="true" dir="src/com/mentor/nucleus/bp/ui/properties" excludes="${cvs_java_files}"/>

  </target>

  <target name="clean_classes"
          description="Remove all compiled class files." >

  <echo>Removing all compiled class files ...</echo>
  <delete verbose="true" dir="bin" />

  </target>
</project>
<!--
$Log: generate.xml,v $
Revision 1.36  2013/05/10 05:34:41  kbrown
job:dts0100942847
Promoting changes from Review-942847-05 to HEAD.  There are a _lot_ of files.  The promotion is being broken into several commit pieces.

Revision 1.35.8.1  2013/04/18 13:45:55  tlondon
Job: dts0100942847

Update dependency target to point at good file

Revision 1.35  2013/01/10 23:20:19  rmulvey
job:dts0100939343
Updated the copyright to 2013

Revision 1.34  2012/01/23 21:24:32  kbrown
job:dts0100848212
Batch commit of copyright updated files.

Revision 1.33  2011/10/07 22:02:31  rmulvey
job:dts0100654681
Promoted from Review-dts0100654681-3.  After the promotion the file will be tagged with chgset-dts0100654681.  Additionally, note that a tag was created an the entire source tree prior to this promotion.  that tag is: R3_3_3-Head-Before-dts0100654681-promotion

Revision 1.32.24.1  2011/10/03 19:47:14  campbell
Job:dts0100654681
Updated from previous branch.

Revision 1.32.22.1  2011/09/26 19:56:35  campbell
Job:dts0100654681
Update to latest HEAD. Asynchronously execute the change action so that a deadlock is avoided.

Revision 1.32.20.1  2011/09/26 12:03:52  campbell
Job:dts0100654681
Update to latest HEAD. Asynchronously execute the change action so that a deadlock is avoided.

Revision 1.32.16.1  2011/09/12 12:31:13  campbell
Job:dts0100654681
Check in work in progress.

Revision 1.32.12.1  2011/08/25 14:19:46  campbell
Job:dts0100654681
Create new branch ready for merge with HEAD.

Revision 1.32  2011/05/30 20:28:03  kbrown
job:dts0100742889
Updated copy right.

Revision 1.31  2011/01/20 16:10:21  kbrown
job:dts0100745185
Bump the java compiler compliance level from 1.5 to 1.6 for the build server.  Changeset will be committed to this DEI separately. This change is going directly to HEAD.

Revision 1.30  2010/09/01 19:46:32  kbrown
job:dts0100714964
Updating HEAD with the changes for generate.xml compile target to pass the encoding to use (UTF-8) to javac.

Also flips the switch on generic packages to no.

Revision 1.29.10.1  2010/09/01 14:43:58  hkhaled
job:dts0100714964

adding encoding="UTF-8" to javac in generate.xml files

Revision 1.29  2010/01/05 03:25:15  kbrown
job:dts0100644853
Batch commit of copyright change from 2009 to 2010 for BP CVS projects.

Revision 1.28  2009/11/19 23:39:25  kbrown
Job:dts0100580393
Update bp.ui.properties generate.xml PTCodeFormat task to fix classpath issues.

NOTE: This change is going directly to HEAD.

Revision 1.27  2009/10/23 17:07:22  kbrown
job:dts0100580393
Batch commit of generate.xml files to fix an issue with wildcards in the compile target.

Revision 1.26  2009/10/23 05:46:07  rmulvey
job:dts0100580393
Promoted from R3_0_3-SKB-dts0100580393

Revision 1.25.4.1  2009/10/15 12:48:51  kbrown
job:dts0100580393
Batch commit of all generate.xml files.  Modified to use a wildcard instead of specifying exact versions of plugins to import on the java classpath when compiling on the build server.

Revision 1.25  2009/05/06 16:37:56  rmulvey
job:dts0100530055
This is a batch commit of changes from the promotion work space created from R2_1_3-SKB-dts0100530239 into head.

Revision 1.24.4.1  2009/05/01 17:20:10  kbrown
Job:dts0100530239
Created new branch R2_1_3-SKB-dts0100530239.  This is a batch checkin of all the changes merging my previous branch into the new branch.

Revision 1.24.2.1  2009/04/17 16:42:37  kbrown
job:dts0100530239
Add new handcraft code to the exclusion files for properties plugin cleaning.

Revision 1.24  2009/01/01 23:17:17  rmulvey
Job:4060
Batch promotion of copyright changes from Review-i4060 and Review-i4060-01.

Revision 1.23.2.1  2008/12/31 15:55:07  rmulvey
Job:4060
This is a batch commit of 2009 copyright changes to branch Review-i4060.  This includes the
report that outlines all changes made (before/after for each line changed).  This report is found here: <cvs>/Documentation/internal/test_results/R2_1_2/i4060/update-copyright-results.txt.

Revision 1.23  2008/09/05 15:28:35  rmulvey
Job:1845 3672 3657
Promoted from branch R2_0_4-SKB-RWM-t-i1845-i3672-i3657

Revision 1.22.20.1  2008/08/22 18:24:43  rmulvey
Job:1845 3672 3657
Introduced working branch R2_0_4-SKB-RWM-i1845-i3672-i3657.  This is based on the current work in branch R2_0_4-SKB-i1845-01 (which is complete but blocked by bug 3672 and bug 3657).

Revision 1.22.18.4  2008/08/21 17:19:55  kbrown
Job:1845
More classpath additions.

Revision 1.22.18.3  2008/08/20 21:37:42  kbrown
Job:1845
Batch checkin of generate.xml files to synchronize the build server compile target classpaths with what is specified in the plugin.xml's Dependencies page.  I did not remove any of the compile classpath lines, but I added any that weren't there when matched with the plugin.xml deps.  Affected files:

com.mentor.nucleus.bp.als/generate.xml

com.mentor.nucleus.bp.core/generate.xml

com.mentor.nucleus.bp.io.core/generate.xml

com.mentor.nucleus.bp.io.ecore/generate.xml

com.mentor.nucleus.bp.io.mdl/generate.xml

com.mentor.nucleus.bp.io.sql/generate.xml

com.mentor.nucleus.bp.ui.canvas/generate.xml

com.mentor.nucleus.bp.ui.explorer/generate.xml

com.mentor.nucleus.bp.ui.properties/generate.xml

com.mentor.nucleus.bp.ui.session/generate.xml

Revision 1.22.18.2  2008/08/19 20:19:16  kbrown
Job:1845
Updated generate.xml build server plugin names to 3.3 names for ui.properties.

Revision 1.22.18.1  2008/08/15 14:34:42  kbrown
Job:1845
Batch commit of merged changes into new working branch R2_0_4-SKB-i1845-01.

Revision 1.22.16.2  2008/07/31 12:58:05  kbrown
Job:1845
Updated paths for Eclipse 3.3.1.1 instead of 3.3.2.

Revision 1.22.16.1  2008/07/12 20:18:01  kbrown
Job:1845
Update jar file names for move to Eclipse 3.3 in generate.xml in bp.ui.properties.

These are jars specified for the PTCodeFormat task.

Revision 1.22  2008/01/08 20:27:26  rmulvey
Job:3349
Promoted from Review-i3349.  The copyright has been updated to 2008 and the version has been bumped to 1.5.4.

Revision 1.21.2.1  2007/12/21 18:10:33  rmulvey
Job:3339
Checking-in the copyriight changes in branch Review-i3349.  A detailed list of these changes is found
in the report produced by the utility used to changesthese messages.  This report is here:
Documentation/internal/test_results/R1_5_4/i3349/update-copyright-results.txt

Revision 1.21  2007/12/14 19:12:21  rmulvey
Job:3085
Promoted from R1_5_3-CDM-i3085-02

Revision 1.20.16.1  2007/12/14 04:40:40  campbell
Job:3085
Block commit latest merge of i3085.

Revision 1.20.12.1  2007/12/05 01:28:38  rmulvey
Job:3085
Completed a merge into Review-i3085-01.  There were conflicts with several issues, the issue that caused the most conflict was 3244.

Revision 1.20.2.2  2007/11/13 02:42:02  rmulvey
Job:3085
Added DimensionsValidator.java to the list of cvs files.

Revision 1.20.2.1  2007/11/07 11:35:19  rmulvey
Job:3085
Added the newDimensionsPropertyDescriptor class to the cvs_java_files property.

Revision 1.20  2007/10/12 16:24:09  kbrown
Job:3195
Updated the compile target that is used (only) by the build server to build the java files.  Added flags to this target to include debugging info such as line numbers, variable names, and source file names.  Also added comment blocks to the compile target explaining it is only used by the build server.  This update also includes a change to the obfuscate template to move from a deprecated target to a new one.  Here are the changes:

com.mentor.nucleus.bp.als/generate.xml

com.mentor.nucleus.bp.compare/generate.xml

com.mentor.nucleus.bp.core/tools/obfuscate_template.xml
com.mentor.nucleus.bp.core/generate.xml

com.mentor.nucleus.bp.core.test/generate.xml

com.mentor.nucleus.bp.debug.ui/generate.xml

com.mentor.nucleus.bp.io.core/generate.xml

com.mentor.nucleus.bp.io.mdl/generate.xml

com.mentor.nucleus.bp.io.sql/generate.xml

com.mentor.nucleus.bp.mc.mc2020/generate.xml

com.mentor.nucleus.bp.mc.mc3020/generate.xml

com.mentor.nucleus.bp.mc.xmiexport/generate.xml

com.mentor.nucleus.bp.ui.canvas/generate.xml

com.mentor.nucleus.bp.ui.canvas.test/generate.xml

com.mentor.nucleus.bp.ui.explorer/generate.xml

com.mentor.nucleus.bp.ui.properties/generate.xml

com.mentor.nucleus.bp.ui.properties.test/generate.xml

com.mentor.nucleus.bp.ui.session/generate.xml

com.mentor.nucleus.bp.ui.text/generate.xml

com.mentor.nucleus.bp.ui.tree/templates/generate.xml

com.mentor.nucleus.bp.welcome/generate.xml

In order to test these files on the build server, the changed files are being checked directly into HEAD.

Revision 1.19  2007/09/05 02:09:34  kbrown
Job:2673
Promoting copyright changes for plugins:
mc.xmiexport
pkg
pkg-feature
test
ui.canvas
ui.canvas.test
ui.explorer
ui.explorer.test
ui.properties
ui.properties.test
ui.session

Revision 1.18.10.1  2007/09/01 01:47:19  rmulvey
Job:2673
Updated copyright messages and version numbers in Review-i2673-01.

Revision 1.18  2007/03/29 16:23:43  tlondon
Job: 692

Update PTCodeFormatter task dependencies to allow it to run outside of eclipse.

Revision 1.17.18.1  2007/03/28 16:35:24  kbrown
Job:692
Updated ant build code formatting task for several projects.

Revision 1.17  2006/10/17 18:37:58  rmulvey
Job:2539
Modified all the generate.xml files and added "memoryinitialsize="512m" memorymaximumsize="512m"" to the javac tasks.

Revision 1.16  2006/08/31 20:26:20  tlondon
Job: 845

Promoting changes from Review-i845 and some additional fixes from Review-i845-02.

These changes include PLCM and CC support.  There are still a few issues that will be addressed shortly and will be treated as new issues against HEAD.

Revision 1.15.8.2  2006/08/28 22:46:27  tlondon
Job: 1778 845

Remove from CVS file list as class is deleted

Revision 1.15.8.1  2006/07/28 11:49:14  babar
Job:845
Created Review-i845 branch and checking in merged work for sharing purpose.

Revision 1.15  2006/07/11 14:47:55  greg
Job: 2015
Jibe with changes in property source naming convention.

Revision 1.14  2006/07/07 16:40:07  greg
Job: 1872
Added ModelElementNameValidator.java to the cvs_java_files list.

Revision 1.13.10.1  2006/07/03 20:13:08  jmather
Job: 1872
Added ModelElementNameValidator.java to the cvs_java_files list.

Revision 1.13  2006/06/02 21:23:50  greg
Job: 1554
- Added "source=1.5" to compile target javac invocation

Revision 1.12.32.1  2006/06/02 15:47:41  greg
Ready for promotion

Revision 1.12.30.1  2006/05/26 20:51:10  greg
Save changes before creating new workspace

Revision 1.12  2006/03/30 19:59:32  greg
Job: 1861
Added the new BridgepointPropertySheetPage and BridgepointPropertySheetSorter classes to the cvs_java_files property.

Revision 1.11  2005/11/11 18:58:33  tlondon
Job: 1196
Changed to employ new generator and its inherent performance enhancements.

Revision 1.10.2.1  2005/11/07 19:53:45  jmather
Job: 1196
Changed to employ new generator and its inherent performance enhancements.

Revision 1.10  2005/10/25 22:04:04  jmather
Job: 626
Added hand written java class to cvs_java_files variable

Revision 1.9.10.1  2005/10/24 15:22:15  tlondon
Job: 626

Added hand written java class to cvs_java_files variable

Revision 1.9  2005/09/21 16:35:51  jmather
Job: 1099
Updated classpath

Revision 1.8.46.1  2005/09/13 18:44:15  tlondon
Job: 1099

Updated classpath

Revision 1.8  2005/06/03 19:20:04  campbell
Job: 1002
Add Validator classes to cvs_java_files property.

Revision 1.7.200.1  2005/06/03 01:32:38  greg
Job: 1002
Add Validator classes to cvs_java_files property

Revision 1.7  2005/01/07 15:20:08  campbell
Job: 618
Removed element for compatibility plug-in from compile target.

Revision 1.6.14.1  2005/01/04 23:43:33  jmather
Job: 618
Removed element for compatibility plug-in from compile target.

Revision 1.6.8.1  2005/01/04 21:09:26  jmather
Job: 618
Removed element for compatibility plug-in from compile target.

Revision 1.6  2004/12/21 22:34:02  greg
Job: 434
Add more classpaths to compile target

Revision 1.5  2004/12/21 18:35:07  greg
Job: 434
Updated compile target to references Eclipse 3.0 plugins.

Revision 1.4  2004/12/16 01:13:21  greg
Job: 599

Removed all build timeouts

Revision 1.3.74.1  2004/12/15 22:21:13  tlondon
Job: 599

Removed all build timeouts


Revision 1.3  2004/09/30 18:40:23  tlondon
Job: 431

Added nb_all, and compile target

Revision 1.2  2004/09/17 20:20:31  greg
Job: 31
Add and use chain_util_path definition

Revision 1.1  2004/08/27 21:37:07  greg
Job: 31
Initial introduction

-->