---

Copyright 2013 Mentor Graphics Corp.  All Rights Reserved.

---

 
Display the port name instead of the interface name in the explorer view for a 
referenced component
### xtUML Project Analysis Note
 

1. Abstract
-----------
It is much more useful to know the port of a component instead of the interface.
If for example the component have multiple port oft he same interface, these
can not be distinguished in the explorer view.
 

2. Document References
----------------------
[1] Git issue 138 - https://github.com/xtuml/internal/issues/138  
[2] CQ issue dts0100729739,  
    Display the port name instead of the interface name in the explorer view for a referenced component  
[3] \\\wv\dfs\bridgepoint\field_data\dts0100729739
    \me_component_multiple_ports_formalized.png
	
3. Background
-------------
 

4. Requirements
---------------
4.1 Display the port name instead of the interface name in the explorer view for
    a referenced component

 
5. Analysis
-----------
5.1 The problem with the current way the interface names are displayed in the 
    tree view is, the case when a component has multiple ports formalized to 
    the same interface. ME looks bad in this case[3].

5.2 There are three ways to get this problem resolved:  
5.2.1 Make the port tree node show directly under the component reference
      in the ME tree view.    
      The changes needed for this solution is one line change in the file 
      ui.explorer/sql/UITree.pei.sql.   This file will be modified to include the 
      port of the component definition as a child of the component 
      reference.  
      The hover text on the imported interface references will
      show the port name.
      Since we have this workaround in the graphics this modification might be 
      enough.  
      The problem of this solution is, the port will now be showing in two places  
      and modification will be allowed in both places.  
      We have the same issue with operations and signals that are used in   
      interface references.  
      SAAB does not want to allow modification at that lower level,  
      so we at least need to consider this.  
      The good thing about this solution is, it's a very limited change
      doesn't involve any meta-model modification. It just involves how the 
      tree points to the port instance as opposed to 
	imported requirement/imported provision elements.
	It only changes how it's displayed in the tree view.
	It is more comprehensible to the user, as they show the same way the ports 
	show under the referenced component.  
      The end result will look like the following:    
      ![alt tag](https://raw.github.com/xtuml/internal/master/doc-internal/notes/138_dts0100729739/portUnderCompRef.PNG?token=2733896__eyJzY29wZSI6IlJhd0Jsb2I6eHR1bWwvaW50ZXJuYWwvbWFzdGVyL2RvYy1pbnRlcm5hbC9ub3Rlcy8xMzhfZHRzMDEwMDcyOTczOS9wb3J0VW5kZXJDb21wUmVmLlBORyIsImV4cGlyZXMiOjEzODk2MzM0Mzh9--ae55a958b9f939719df570b25d9f23a81b400780)	  							 

5.2.2 Modify the tree node of the imported requirement/imported provision 
      that shows under the component reference, to show the port name along with 
	  the interface name.  
	  The changes needed for this solution is adding an if statement to the 
	  ui.explorer/arc/create_label_provider.inc file.   
	  Consequently the method getText() will return a different result in 
	  case of imported requirement/imported provision elements.  
	  The result will be in the form portName::InterfaceName    
	  Displaying the portName will be optional, it will be controlled by
	  a preference that defaults to true.  
	  If that preference is set to false the port name will not show.  
          The end result will look like the following:  
	  ![alt tag]( https://raw.github.com/xtuml/internal/master/doc-internal/notes/138_dts0100729739/PortNameAlongWithIfaceName.PNG?token=2733896__eyJzY29wZSI6IlJhd0Jsb2I6eHR1bWwvaW50ZXJuYWwvbWFzdGVyL2RvYy1pbnRlcm5hbC9ub3Rlcy8xMzhfZHRzMDEwMDcyOTczOS9Qb3J0TmFtZUFsb25nV2l0aElmYWNlTmFtZS5QTkciLCJleHBpcmVzIjoxMzg5NjMzNDQyfQ%3D%3D--222a47be449447334878c9a28187b923592af5e3)
  
5.2.3 Introduce new model element Port Reference. This is a new class, with new 
      data for explorer, properties and probably ui.text.
      This new element will capture all the needed informations and would  
      serve as a child for the component reference the same way Port is child
      to component. 	  
      It will have a representation in the model explorer view as a tree node 
      that is a child to the component reference.
      This will need multi-file modification plus all of the maintenance OAL for 
	  needed for setting up the instances and disposing them.
      The final look of this solution will be the same as the one presented in 
      [5.2.1], without the ability to modify the component port in multiple 
      places.
      	  
	  
5.3 The Proposed solution is the one explained in 5.2.3   
    The work required for this solution is detailed below in section[6]    	

6. Work Required
----------------
6.1 Add the new class to the metamodel   
6.2 Upgrade parser traversals to use port reference where needed  
6.3 Touch the verifier in limited places to use the new traversal  
6.4 Upgrade the io.mdl plugin to adjust the import and export to consider the new elemnt  
6.5 Create upgrade functionality to upgrade old models that doesn't have this elemnt present  
6.6 Upgrade model compare feature to count for the new element  
6.7 Update contect menu entries for the new elemnt   
6.8 Upgrade model compilers to consider the new element if needed   
6.9 Upgrade Junit tests results where needed   


7. Acceptance Test
------------------
7.1 In case of [5.1.1]
    _- Open GPS project  
    _- Navigate to "system" package  
    _- In the ME expand component reference "GPS Watch::Library::UI"  
    R_ Under the component reference shows "UI" port name  
    _- Expand "UI" port    
    R_ The interface name "UI" shows directly under the port
 
 
End
---
